{% load static %}
<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>{% block title %}FesCode - {% endblock %}</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

  <!-- Favicons -->
  <link href="{% static 'assets/img/favicon.png' %}" rel="icon">
  <link href="{% static 'assets/img/apple-touch-icon.png' %}" rel="apple-touch-icon">

  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <!-- Fonts (Inter for Apple-like typography) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- CSS Libraries -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.snow.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.bubble.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/style.css" rel="stylesheet">
  <link href="{% static 'assets/css/style.css' %}" rel="stylesheet">

  <!-- Global Theme Variables -->
  <style>
    :root {
      --bg-color: #f5f5f7;
      --text-color: #1a1a1a;
      --sidebar-bg: #ffffff;
      --sidebar-text: #1a1a1a;
      --nav-bg: transparent;
      --nav-text: #1a1a1a;
      --nav-hover-bg: rgba(0, 0, 0, 0.05);
      --nav-hover-text: #1a1a1a;
      --nav-active-bg: rgba(0, 122, 255, 0.1);
      --nav-active-text: #007aff;
      --card-bg: #ffffff;
      --card-text: #1a1a1a;
      --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      --badge-bg: #34c759;
      --theme-toggle-bg: #ffffff;
      --theme-toggle-border: #e0e0e0;
      --theme-toggle-active: #007aff;
      --transition: all 0.3s ease;
    }

    [data-theme="dark"] {
      --bg-color: #121212;
      --text-color: #ffffff;
      --sidebar-bg: #1e1e1e;
      --sidebar-text: #ffffff;
      --nav-bg: #252525;
      --nav-text: #ffffff;
      --nav-hover-bg: rgba(255, 255, 255, 0.1);
      --nav-hover-text: #ffffff;
      --nav-active-bg: rgba(10, 132, 255, 0.2);
      --nav-active-text: #0a84ff;
      --card-bg: #252525;
      --card-text: #ffffff;
      --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      --badge-bg: #30d158;
      --theme-toggle-bg: #252525;
      --theme-toggle-border: #444;
      --theme-toggle-active: #0a84ff;
    }

    body {
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: 'Inter', sans-serif;
      transition: var(--transition);
    }

    /* Global Navigation Styles */
    .sidebar {
      background-color: var(--sidebar-bg);
      color: var(--sidebar-text);
      transition: var(--transition);
    }

    .sidebar-nav .nav-link {
      background-color: var(--nav-bg);
      color: var(--nav-text);
      transition: var(--transition);
    }

    .sidebar-nav .nav-link:hover {
      background-color: var(--nav-hover-bg);
      color: var(--nav-hover-text);
    }

    .sidebar-nav .nav-link.active {
      background-color: var(--nav-active-bg);
      color: var(--nav-active-text);
    }

    /* Cards and Containers */
    .card {
      background-color: var(--card-bg);
      color: var(--card-text);
      box-shadow: var(--card-shadow);
      transition: var(--transition);
    }

    /* Badges */
    .badge {
      background-color: var(--badge-bg);
      transition: var(--transition);
    }

    /* Theme Toggle Base Styles */
    .theme-toggle {
      background-color: var(--theme-toggle-bg);
      border-color: var(--theme-toggle-border);
      transition: var(--transition);
    }

    .theme-btn {
      color: var(--text-color);
      transition: var(--transition);
    }

    .theme-btn.active {
      background-color: var(--theme-toggle-active);
      color: white;
    }

    /* Animations */
    .badge.pulse {
      animation: pulse 1.5s infinite;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    /* Responsive Adjustments */
    @media (max-width: 768px) {
      .sidebar {
        position: fixed;
        top: 0;
        left: -250px;
        width: 250px;
        height: 100%;
        transition: left 0.3s ease;
      }
      .sidebar.active {
        left: 0;
      }
    }
  </style>

  {% block extra_css %}
  {% endblock %}
</head>

<body>
  <!-- Sidebar -->
  {% include 'header.html' %}
  {% include 'admin_component/admin_sidebar.html' %}

  <!-- Main -->
  {% block content %}
  <main id="main" class="main">
  </main>
  {% endblock %}

  {% include 'footer.html' %}

  <!-- Back-to-top -->
  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- JS Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.40.0/dist/apexcharts.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.3/dist/chart.umd.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.0/dist/echarts.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/quill@1.3.7/dist/quill.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest"></script>
  <script src="https://cdn.jsdelivr.net/npm/tinymce@6.7.0/tinymce.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/twbs/form-validation/dist/js/validate.min.js"></script>
  <script src="{% static 'assets/js/main.js' %}"></script>

  <!-- Theme Switching Script -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      // Initialize theme from localStorage or system preference
      const savedTheme = localStorage.getItem('theme') || 'system';
      setTheme(savedTheme);
      
      // Listen for theme changes from the sidebar toggler
      document.addEventListener('themeChanged', (e) => {
        setTheme(e.detail.theme);
      });

      // System theme change detection
      const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
      mediaQuery.addEventListener('change', () => {
        if (localStorage.getItem('theme') === 'system') {
          setTheme('system');
        }
      });

      function setTheme(theme) {
        localStorage.setItem('theme', theme);
        
        if (theme === 'system') {
          const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
          document.documentElement.setAttribute('data-theme', systemTheme);
        } else {
          document.documentElement.setAttribute('data-theme', theme);
        }
        
        // Dispatch event to update any UI components
        document.dispatchEvent(new CustomEvent('themeUpdated', { 
          detail: { theme: theme }
        }));
      }
    });
  </script>

  {% block extra_js %}
  {% endblock %}
</body>
</html>